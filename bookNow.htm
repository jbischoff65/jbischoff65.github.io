<!--
   Author: Jacob Bischoff
   Southern Illinois University
   Developed: August 28th, 2025
   Updated: December 8th, 2025
   ====================================== -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Book Now</title>
<link rel="stylesheet" href="styles/main.css">
<link rel="stylesheet" href="styles/slicknav.css">
<link rel="stylesheet" href="home_print.css" media = "print">
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="js/jquery.slicknav.min.js"></script>
<script>
$(document).ready(function(){ $('#nav_menu').slicknav({prependTo:'#mobile_menu'}); });
</script>
<link rel="stylesheet" href="styles/calendar.css">

</head>
<body>
<header class="site-header">
  <div class="header-container">
    <div class="logo-title">
      <a href="index.html" class="logo-link"><img src="images/logo.png" class="logo"></a>
      <h1 class="site-title">Bischoff’s Mobile Detailing</h1>
    </div>
    <nav id="nav_menu" class="main-nav">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="services.htm">Services</a></li>
        <li><a href="bookNow.htm" class="current">Book Now!</a></li>
        <li><a href="pricing.htm">Pricing</a></li>
        <li><a href="location.htm">Locations</a></li>
        <li><a href="reviews.htm">Reviews</a></li>
      </ul>
    </nav>
    <nav id="mobile_menu"></nav>
  </div>
</header>

<h1 style="text-align:center; margin-top:40px;">Book Your Appointment Now!</h1>

<div id="calendar"></div>
<div id="timeModal"></div>

<script>
  
let currentDate = new Date();

function loadCalendar(date){
  const year = date.getFullYear();
  const month = date.getMonth();
  const firstDay = new Date(year, month, 1).getDay();
  const daysInMonth = new Date(year, month + 1, 0).getDate();

  let html = `<header>
      <button onclick="changeMonth(-1)">◀</button>
      <h2>${date.toLocaleString('default',{month:'long'})} ${year}</h2>
      <button onclick="changeMonth(1)">▶</button>
    </header>`;

  html += '<table><tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr><tr>';

  for(let i=0;i<firstDay;i++){ html += '<td></td>'; }

  for(let d=1; d <= daysInMonth; d++){
    const fullDate = new Date(year, month, d);
    html += `<td onclick="selectDate('${fullDate}')">${d}</td>`;
    if((d + firstDay) % 7 === 0) html += '</tr><tr>';
  }

  html += '</tr></table>';
  document.getElementById('calendar').innerHTML = html;
}

function changeMonth(n){ currentDate.setMonth(currentDate.getMonth()+n); loadCalendar(currentDate);} 

function selectDate(date){
  const modal = document.getElementById('timeModal');
  modal.style.display = 'block';
  modal.innerHTML = `
    <h3>Select a Time</h3>
    <p>${new Date(date).toDateString()}</p>
    <select id='timeSelect'>
      <option>9:00 AM</option><option>10:00 AM</option><option>11:00 AM</option>
      <option>12:00 PM</option><option>1:00 PM</option><option>2:00 PM</option>
      <option>3:00 PM</option><option>4:00 PM</option>
    </select>
    <br><br>
    <button onclick="confirmBooking('${date}')">Confirm</button>
    <button onclick="closeModal()">Cancel</button>
  `;
}

function closeModal(){ document.getElementById('timeModal').style.display='none'; }

function confirmBooking(date){
  const time = document.getElementById('timeSelect').value;
  alert("Booking confirmed for: " + new Date(date).toDateString() + " at " + time);
  closeModal();
}

loadCalendar(currentDate);
</script>
</body>
</html>
